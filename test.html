<p>ðŸ‘€ Page Views : <span id="pageViews">Loading...</span></p>

<script>
async function fetchPageViews() {
  try {
    const res = await fetch('/api/traffic');
    const data = await res.json();

    document.getElementById('pageViews').textContent = data.pageViews ?? 0;
  } catch (err) {
    console.error(err);
    document.getElementById('pageViews').textContent = 'Erreur';
  }
}

fetchPageViews();

async function fetchStats() {
  try {
    const res = await fetch('/api/stats');
    const data = await res.json();

    document.getElementById('pageViews').textContent = data.pageViews;
    document.getElementById('affiliates').textContent = data.affiliates;
    document.getElementById('orders').textContent = data.orders;
    document.getElementById('revenue').textContent = data.revenue + " â‚¬";
    document.getElementById('commissions').textContent = data.commissions + " â‚¬";
  } catch (err) {
    console.error(err);
  }
}

fetchStats();

</script>
